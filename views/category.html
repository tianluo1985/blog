<!DOCTYPE html>
<html>
{{template "header"}}

  <body>
{{template "navbar".}}
      <br><br>
      <div class="container">
          <div class="page-header">
              <form method="GET" action="/category">
                  <div class="form group">
                    <label >分类名称</label>
                    <input  id="name" class="form-control" placeholder="Enter name" name="name">
                  </div>
                    <input  type="hidden" name="op" value="add">
                  <div>
                    <button type="submit" class="btn btn-default" onclick="return checkInput();" >添加</button>
                    <button class="btn btn-default" onclick="return backToHome();">返回</button>
                  </div>
                </form>
              <table class="table table-stripped">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>名称</th>
                    <th>文章数</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody>
                  {{range .Categories}}
                  <tr>
                    <th>{{.Id}}</th>
                    <th>{{.Title}}</th>
                    <th>{{.TopicCount}}</th>
                    <th>
                      <a href="/category?op=del&id={{.Id}}" class="btn btn-default">删除</a>
                    </th>
                  </tr>
                  {{end}}
                </tbody>
              </table>

              <script type ="text/javascript">
                function checkInput(){
                  var name=document.getElementById("name")
                  if (name.value.length==0) {
                    alert("请输入分类名称")
                    return false
                  }
                  return true
                }

                function backToHome(){
                  window.location.href="/"
                  return false
                }
              </script>

          </div>
      </div>
  </body>
</html>